{% extends 'base.html.twig' %}

{% block title %} - Entreprises{% endblock %}

{% block style %} {{ parent() }} {% endblock %}

{% block logoLink %} {{ parent() }} {% endblock %}

{% block navbar %} 

    
    <li><a href="/talent">Espace Talents</a></li>
    <li><a href="/pro">Espace Entreprises</a></li>
    {% if user != null %}
        <li><a href="logout" class="btn btn-blue">Déconnexion</a></li>
    {% endif %}
    {% if user == null %}
        <li><a href="#" data-toggle="modal" data-target="#modalLogin" class="btn btn-blue">Connexion</a></li>
        <li><a href="#" data-toggle="modal" data-target="#modalRegistration" class="btn btn-blue">Inscription</a></li>
    {% endif %}

{% endblock %}
    

{% block header %}

    {{ parent()}}

{% endblock %}

{% block pageTitle %}
    Détails de votre profil
{% endblock %}

{% block body %}

    <section class="section gray-bg">
        <div class="container profile">
            <div class="text-center">
                <img class="margin-top profile-picture" src="{{ user.picture }}" alt="Logo de {{ user.username }}">
                <h1>{{ user.username }}</h1>
            </div>
            <div class="profile-details margin-top">
                    <div class="details">
                        <p class="profileElement">Nom:</h3><p>{{ user.name }}</p>
                    </div>
                    <div class="details">
                        <p class="profileElement">Email:</h3><p>{{ user.mail }}</p>
                    </div>
                    <div class="details">
                        <p class="profileElement">Adresse:</h3><p>{{ user.address }}</p>
                    </div>
                    <div class="details">
                        <p class="profileElement">Téléphone:</h3><p>{{ user.phone }}</p>
                    </div>
                    <div class="details">
                        <p class="profileElement">Offres publiées actuellement:</p>
                        {% for offer in user.jobOffers %}
                            <div class="profileButtons">
                                <form method="post" action="/job">
                                    <input type="hidden" name="id" value="{{ offer.id }}">
                                    <button type="submit" class="btn btn-offer">{{ offer.jobName }}</button>
                                </form>  
                            </div>
                        {% else %}
                            <li>Aucune offre d'emploi publiée actuellement</li>
                        {% endfor %}
                    </div>
            </div>
            <div class="row title text-center d-flex">
                <a href="#" data-toggle="modal" data-target="#modalAddOffer" class="btn btn-blue">Ajouter une offre d'emploi</a>
                <a href="#" data-toggle="modal" data-target="#modalEditCompany" class="btn btn-blue">Modifier vos informations</a>
            </div>
        </div>
    </section>

    {% block footer %} {{ parent() }} {% endblock %}

{% endblock %}

{% block securityForms %}
    <div class="modal fade" id="modalEditCompany" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content modal-popup">
                <a href="#" class="close-link"><i class="icon_close_alt2"></i></a>
                <h3 class="white">Modifier profil Entreprise</h3>
                <form action="" class="popup-form">
                    <input type="text" name="name" class="form-control form-white" value="{{ user.name }}" placeholder="Remplacer {{ user.name }} ?">
                    <input type="text" name="email" class="form-control form-white" value="{{ user.mail }}" placeholder="Remplacer {{ user.mail }} ?">
                    <input type="text" name="picture" class="form-control form-white" value="{{ user.picture }}" placeholder="Remplacer le logo de l'entreprise ?">
                    <input type="text" name="address" class="form-control form-white" value="{{ user.address }}" placeholder="Remplacer {{ user.address }} ?">
                    <input type="text" name="phone" class="form-control form-white" value="{{ user.phone }}"  placeholder="Remplacer {{ user.phone }} ?">
                    

                    {# <div class="dropdown">
                        <button id="dLabel" class="form-control form-white dropdown" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Vos besoins
                        </button>
                        <ul class="dropdown-menu animated fadeIn" role="menu" aria-labelledby="dLabel">
                            <li class="animated lightSpeedIn"><a href="#">Diffusion d'offre d'emploi</a></li>
                            <li class="animated lightSpeedIn"><a href="#">Elaboration de cahier des charges</a></li>
                            <li class="animated lightSpeedIn"><a href="#">Autre demande</a></li>
                        </ul>
                    </div>
                    <div class="checkbox-holder text-left">
                        <div class="checkbox">
                            <input type="checkbox" value="None" id="squaredOne" name="check" />
                            <label for="squaredOne"><span>J'accepte les <strong>conditions générales</strong></span></label>
                        </div>
                    </div> #}
                    <button type="submit" class="btn btn-submit" formaction="companyEdit" formmethod="post">Envoyer</button>
                    {# <a href="#" data-toggle="modal" data-target="#modal1" class="btn btn-blue">Connexion</a> #}
                </form>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalAddOffer" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content modal-popup">
                <a href="#" class="close-link" data-dismiss="modal"><i class="icon_close_alt2"></i></a>
                <div class="form-control form-white">
                    <h3 class="white">Ajouter une offre d'emploi</h3>
                    <form action="" class="popup-form" enctype="multipart/form-data">
                        <input type="text" name="jobName" class="form-control form-white" placeholder="Intitulé du poste" required>
                        <textarea name="jobDescription" class="form-control form-white" rows="4" cols="50" placeholder="Description du poste "></textarea>
                        <input type="text" name="requiredExperience" class="form-control form-white" placeholder="Expérience demandée">
                        <input type="text" name="salary" class="form-control form-white" placeholder="Salaire">
                        <input type="text" name="jobPlace" class="form-control form-white" placeholder="Localisation du poste">
                        <input type="text" name="contact" class="form-control form-white" placeholder="Contact">
                        <div class="form-white">
                            <label for="remotePossibility">Télétravail possible</label>
                            <input type="checkbox" name="remotePossibility">
                        </div>
                        <div class="form-control form-white file-input">
                            <label for="CV">Importer la fiche de poste au format PDF</label>
                            <input type="file" name="jobSheet" accept="application/pdf">
                        </div>

                        
                        <button type="submit" class="btn btn-submit" formaction="addOpportunity" formmethod="post">Envoyer</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    {% block loginRedirectionPath %} 
        <input type="hidden" name="_target_path" value="{{ path('homePro') }}"/>
    {% endblock %}

{% endblock %}

